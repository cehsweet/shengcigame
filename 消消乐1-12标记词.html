<!DOCTYPE html>

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生词消消乐</title>
    <style>
        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #ffeaa7, #fab1a0, #fd79a8, #a29bfe);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            margin: 0;
            padding: 15px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            overflow-x: hidden;
        }

```
    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .stars {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
    }

    .star {
        position: absolute;
        color: #fff;
        font-size: 20px;
        animation: twinkle 2s infinite;
    }

    @keyframes twinkle {
        0%, 100% { opacity: 0.3; transform: scale(0.8); }
        50% { opacity: 1; transform: scale(1.2); }
    }

    .header {
        text-align: center;
        margin-bottom: 20px;
        z-index: 10;
        position: relative;
    }

    .title {
        font-size: 2.2em;
        font-weight: bold;
        color: #2d3436;
        text-shadow: 3px 3px 0px #fff, 6px 6px 10px rgba(0,0,0,0.2);
        margin: 0;
        padding: 10px;
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: rainbowText 3s ease-in-out infinite;
    }

    @keyframes rainbowText {
        0%, 100% { filter: hue-rotate(0deg); }
        50% { filter: hue-rotate(180deg); }
    }

    .game-info {
        display: flex;
        justify-content: space-between;
        width: 100%;
        max-width: 350px;
        margin-bottom: 20px;
        z-index: 10;
        position: relative;
    }

    .info-box {
        background: rgba(255, 255, 255, 0.9);
        padding: 8px 15px;
        border-radius: 20px;
        font-weight: bold;
        color: #2d3436;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        border: 3px solid #fff;
    }

    .level-info {
        font-size: 1.1em;
        color: #e17055;
    }

    .timer {
        font-size: 1.1em;
        color: #00b894;
    }

    .game-container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
        max-width: 350px;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        z-index: 10;
        position: relative;
    }

    .card {
        width: 70px;
        height: 70px;
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 16px;
        color: white;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        user-select: none;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3), inset 0 2px 0 rgba(255,255,255,0.3);
        position: relative;
        overflow: hidden;
        border: 3px solid rgba(255, 255, 255, 0.6);
    }

    .card::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.4), transparent);
        transform: rotate(45deg);
        transition: all 0.5s;
        opacity: 0;
    }

    .card:hover::before {
        opacity: 1;
        animation: shine 0.5s ease-in-out;
    }

    @keyframes shine {
        0% { transform: translateX(-100%) rotate(45deg); }
        100% { transform: translateX(100%) rotate(45deg); }
    }

    .card:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
    }

    .card.selected {
        transform: scale(1.15) rotate(5deg);
        box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        border: 4px solid #fff;
        animation: pulse 1s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1.15) rotate(5deg); }
        50% { transform: scale(1.2) rotate(-5deg); }
    }

    .card.matched {
        opacity: 0;
        transform: scale(0) rotate(180deg);
        pointer-events: none;
        animation: matchSuccess 0.8s ease-in-out forwards;
    }

    @keyframes matchSuccess {
        0% { transform: scale(1.15) rotate(0deg); opacity: 1; }
        50% { transform: scale(1.3) rotate(180deg); opacity: 0.5; }
        100% { transform: scale(0) rotate(360deg); opacity: 0; }
    }

    .pinyin-card {
        flex-direction: column;
        line-height: 1.2;
        font-size: 14px;
    }

    .success-message {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #6c5ce7, #a29bfe);
        color: white;
        padding: 40px;
        border-radius: 30px;
        text-align: center;
        font-size: 1.8em;
        font-weight: bold;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        z-index: 1000;
        display: none;
        border: 4px solid #fff;
        animation: successPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes successPop {
        0% { transform: translate(-50%, -50%) scale(0) rotate(180deg); }
        100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
    }

    .level-complete {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #00b894, #00cec9);
        color: white;
        padding: 30px;
        border-radius: 25px;
        text-align: center;
        font-size: 1.5em;
        font-weight: bold;
        box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        z-index: 1000;
        display: none;
        border: 3px solid #fff;
        animation: levelPop 0.5s ease-out;
    }

    @keyframes levelPop {
        0% { transform: translate(-50%, -50%) scale(0); }
        100% { transform: translate(-50%, -50%) scale(1); }
    }

    .continue-btn {
        background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 1.2em;
        border-radius: 30px;
        cursor: pointer;
        margin-top: 20px;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        border: 3px solid #fff;
    }

    .continue-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 30px rgba(0,0,0,0.4);
        background: linear-gradient(45deg, #e84393, #fd79a8);
    }

    .progress-bar {
        width: 100%;
        max-width: 350px;
        height: 20px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 15px;
        border: 2px solid rgba(255, 255, 255, 0.5);
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #00b894, #00cec9);
        border-radius: 8px;
        transition: width 0.5s ease;
        box-shadow: 0 2px 10px rgba(0, 184, 148, 0.5);
    }

    @media (max-width: 400px) {
        .game-container {
            max-width: 300px;
            gap: 10px;
            padding: 15px;
        }
        
        .card {
            width: 60px;
            height: 60px;
            font-size: 14px;
        }
        
        .title {
            font-size: 1.8em;
        }
    }
</style>
```

</head>
<body>
    <div class="stars" id="stars"></div>

```
<div class="header">
    <h1 class="title">生词消消乐</h1>
</div>

<div class="game-info">
    <div class="info-box level-info" id="levelInfo">第1关</div>
    <div class="info-box timer" id="timer">时间: 00:00</div>
</div>

<div class="progress-bar">
    <div class="progress-fill" id="progressFill"></div>
</div>

<div class="game-container" id="gameContainer">
</div>

<div class="level-complete" id="levelComplete">
    <div>🎉 太棒了！ 🎉</div>
    <div id="nextLevelText">第2关</div>
    <button class="continue-btn" onclick="nextLevel()">继续挑战</button>
</div>

<div class="success-message" id="successMessage">
    <div>🏆 恭喜挑战成功！ 🏆</div>
    <div id="finalTime"></div>
    <button class="continue-btn" onclick="startNewGame()">继续挑战</button>
</div>

<script>
    const vocabList = [
        {word: "带我", pinyin: ["dài", "wǒ"]},
        {word: "轻抚", pinyin: ["qīng", "fǔ"]},
        {word: "翻越", pinyin: ["fān", "yuè"]},
        {word: "连绵", pinyin: ["lián", "mián"]},
        {word: "细", pinyin: ["xì"]},
        {word: "好主意", pinyin: ["hǎo", "zhǔ yi"]},
        {word: "既然", pinyin: ["jì", "rán"]},
        {word: "定规则", pinyin: ["dìng", "guī zé"]},
        {word: "踢了", pinyin: ["tī", "le"]},
        {word: "总踩线", pinyin: ["zǒng", "cǎi xiàn"]},
        {word: "失落", pinyin: ["shī", "luò"]},
        {word: "规则", pinyin: ["guī", "zé"]},
        {word: "需要", pinyin: ["xū", "yào"]},
        {word: "重复", pinyin: ["chóng", "fù"]},
        {word: "每人", pinyin: ["měi", "rén"]},
        {word: "于是", pinyin: ["yú", "shì"]},
        {word: "无数", pinyin: ["wú", "shù"]},
        {word: "帮助", pinyin: ["bāng", "zhù"]},
        {word: "埋", pinyin: ["mái"]},
        {word: "向着", pinyin: ["xiàng", "zhe"]},
        {word: "提炼成", pinyin: ["tí", "liàn chéng"]},
        {word: "经常", pinyin: ["jīng", "cháng"]},
        {word: "团团转", pinyin: ["tuán", "tuán zhuàn"]},
        {word: "勇敢", pinyin: ["yǒng", "gǎn"]},
        {word: "怎么办", pinyin: ["zěn", "me bàn"]},
        {word: "追上来", pinyin: ["zhuī", "shàng lái"]},
        {word: "怦怦跳", pinyin: ["pēng", "tiào"]},
        {word: "礼貌", pinyin: ["lǐ", "mào"]},
        {word: "圆溜溜", pinyin: ["yuán", "liū liū"]},
        {word: "涂一涂", pinyin: ["tú", "yì tú"]},
        {word: "折一折", pinyin: ["zhē", "yì zhē"]},
        {word: "遇到", pinyin: ["yù", "dào"]},
        {word: "参观", pinyin: ["cān", "guān"]},
        {word: "秩序", pinyin: ["zhì", "xù"]},
        {word: "拥挤", pinyin: ["yōng", "jǐ"]},
        {word: "决定", pinyin: ["jué", "dìng"]},
        {word: "滑板", pinyin: ["huá", "bǎn"]},
        {word: "终于", pinyin: ["zhōng", "yú"]},
        {word: "丰收", pinyin: ["fēng", "shōu"]},
        {word: "将", pinyin: ["jiāng"]},
        {word: "超市", pinyin: ["chāo", "shì"]},
        {word: "设计", pinyin: ["shè", "jì"]},
        {word: "广告", pinyin: ["guǎng", "gào"]},
        {word: "准备", pinyin: ["zhǔn", "bèi"]},
        {word: "演出", pinyin: ["yǎn", "chū"]},
        {word: "亲吻", pinyin: ["qīn", "wěn"]},
        {word: "呀", pinyin: ["ya"]},
        {word: "悄悄", pinyin: ["qiāo", "qiāo"]},
        {word: "或", pinyin: ["huò"]},
        {word: "美味", pinyin: ["měi", "wèi"]},
        {word: "换", pinyin: ["huàn"]},
        {word: "刷", pinyin: ["shuā"]},
        {word: "未来", pinyin: ["wèi", "lái"]},
        {word: "想让", pinyin: ["xiǎng", "ràng"]},
        {word: "帮忙", pinyin: ["bāng", "máng"]},
        {word: "被", pinyin: ["bèi"]},
        {word: "诊所", pinyin: ["zhěn", "suǒ"]},
        {word: "赶去", pinyin: ["gǎn", "qù"]},
        {word: "为", pinyin: ["wèi"]},
        {word: "成功", pinyin: ["chéng", "gōng"]},
        {word: "忙完", pinyin: ["máng", "wán"]},
        {word: "最后", pinyin: ["zuì", "hòu"]},
        {word: "孩子", pinyin: ["hái", "zi"]}
    ];

    const colors = [
        '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', 
        '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3', '#ff9f43',
        '#10ac84', '#ee5a24', '#0984e3', '#6c5ce7', '#a29bfe',
        '#fd79a8', '#fdcb6e', '#e84393', '#00b894', '#00cec9'
    ];

    let gameData = [];
    let selectedCards = [];
    let matchedPairs = 0;
    let startTime;
    let timerInterval;
    let currentLevel = 1;
    let totalLevels = 5;
    let wordsPerLevel = 12;
    let usedWords = [];
    let allWordsUsed = [];
    let gameStarted = false;

    function getRandomColor() {
        return colors[Math.floor(Math.random() * colors.length)];
    }

    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    function createStars() {
        const starsContainer = document.getElementById('stars');
        starsContainer.innerHTML = '';
        
        for (let i = 0; i < 15; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.innerHTML = '⭐';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 2 + 's';
            starsContainer.appendChild(star);
        }
    }

    function getWordsForLevel(level) {
        // 确保每个词汇都被使用，但不在同一关重复
        const availableWords = vocabList.filter(word => !usedWords.includes(word));
        
        if (availableWords.length < wordsPerLevel) {
            // 如果可用词汇不足，重置已使用词汇列表
            usedWords = [];
            return shuffleArray(vocabList).slice(0, wordsPerLevel);
        }
        
        const selectedWords = shuffleArray(availableWords).slice(0, wordsPerLevel);
        usedWords = usedWords.concat(selectedWords);
        
        return selectedWords;
    }

    function initLevel() {
        const selectedVocab = getWordsForLevel(currentLevel);
        gameData = [];
        
        selectedVocab.forEach((vocab, index) => {
            // 添加汉字卡片
            gameData.push({
                id: `word_${index}`,
                type: 'word',
                content: vocab.word,
                matchId: index,
                color: getRandomColor()
            });
            
            // 添加拼音卡片
            gameData.push({
                id: `pinyin_${index}`,
                type: 'pinyin',
                content: vocab.pinyin,
                matchId: index,
                color: getRandomColor()
            });
        });
        
        gameData = shuffleArray(gameData);
        selectedCards = [];
        matchedPairs = 0;
        
        document.getElementById('levelInfo').textContent = `第${currentLevel}关`;
        updateProgress();
        renderGame();
        
        if (!gameStarted) {
            startTimer();
            gameStarted = true;
        }
    }

    function updateProgress() {
        const progress = (matchedPairs / wordsPerLevel) * 100;
        document.getElementById('progressFill').style.width = progress + '%';
    }

    function renderGame() {
        const container = document.getElementById('gameContainer');
        container.innerHTML = '';
        
        gameData.forEach(card => {
            const cardElement = document.createElement('div');
            cardElement.className = 'card';
            cardElement.id = card.id;
            cardElement.style.backgroundColor = card.color;
            cardElement.onclick = () => selectCard(card);
            
            if (card.type === 'word') {
                cardElement.textContent = card.content;
            } else {
                cardElement.className += ' pinyin-card';
                if (Array.isArray(card.content)) {
                    card.content.forEach(pinyin => {
                        const pinyinSpan = document.createElement('div');
                        pinyinSpan.textContent = pinyin;
                        cardElement.appendChild(pinyinSpan);
                    });
                } else {
                    cardElement.textContent = card.content;
                }
            }
            
            container.appendChild(cardElement);
        });
    }

    function selectCard(card) {
        const cardElement = document.getElementById(card.id);
        
        if (cardElement.classList.contains('matched') || 
            selectedCards.find(c => c.id === card.id)) {
            return;
        }
        
        if (selectedCards.length < 2) {
            selectedCards.push(card);
            cardElement.classList.add('selected');
            
            if (selectedCards.length === 2) {
                setTimeout(checkMatch, 1000);
            }
        }
    }

    function checkMatch() {
        const [card1, card2] = selectedCards;
        const element1 = document.getElementById(card1.id);
        const element2 = document.getElementById(card2.id);
        
        if (card1.matchId === card2.matchId && card1.type !== card2.type) {
            // 匹配成功
            element1.classList.add('matched');
            element2.classList.add('matched');
            matchedPairs++;
            updateProgress();
            
            if (matchedPairs === wordsPerLevel) {
                setTimeout(() => {
                    if (currentLevel < totalLevels) {
                        showLevelComplete();
                    } else {
                        showFinalSuccess();
                    }
                }, 800);
            }
        } else {
            // 匹配失败
            element1.classList.remove('selected');
            element2.classList.remove('selected');
        }
        
        selectedCards = [];
    }

    function showLevelComplete() {
        const nextLevelText = document.getElementById('nextLevelText');
        nextLevelText.textContent = `第${currentLevel + 1}关`;
        document.getElementById('levelComplete').style.display = 'block';
    }

    function nextLevel() {
        document.getElementById('levelComplete').style.display = 'none';
        currentLevel++;
        initLevel();
    }

    function showFinalSuccess() {
        clearInterval(timerInterval);
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        
        document.getElementById('finalTime').textContent = 
            `完成时间: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        document.getElementById('successMessage').style.display = 'block';
    }

    function startTimer() {
        startTime = Date.now();
        timerInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = Math.floor(elapsed / 60);
        const seconds = elapsed % 60;
        document.getElementById('timer').textContent = 
            `时间: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    function startNewGame() {
        document.getElementById('successMessage').style.display = 'none';
        clearInterval(timerInterval);
        currentLevel = 1;
        usedWords = [];
        gameStarted = false;
        createStars();
        initLevel();
    }

    // 初始化游戏
    createStars();
    initLevel();
</script>
```

</body>
</html>